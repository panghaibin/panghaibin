(function(){"use strict";var t={7855:function(t,e,i){var l=i(9242),o=i(3396);function n(t,e){const i=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(i)}var s=i(89);const a={},r=(0,s.Z)(a,[["render",n]]);var d=r,h=i(2350),c=i(5431);(0,c.z)("/COVID-Risk-Region/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(t){console.log("Service worker has been registered and now polling for updates."),setInterval((()=>{t.update()}),5e3)},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(t){console.log("New content is available; please refresh."),document.dispatchEvent(new CustomEvent("swUpdated",{detail:t}))},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var u=i(179),_=i(678),p=(i(9060),i(9200),i(7086),i(6570),i(9740)),f=(i(3189),i(5065));const g=t=>((0,o.dD)("data-v-5493e71b"),t=t(),(0,o.Cn)(),t),m={class:"footer-section"},w=(0,o.Uk)(" 其余未列出地区为常态化防控区域 "),k=g((()=>(0,o._)("br",null,null,-1))),y=(0,o.Uk)(" 数据来自"),b=(0,o.Uk)("国家卫健委"),x=(0,o.Uk)(" | "),v=(0,o.Uk)("GitHub"),C=(0,o.Uk)(" | "),S=(0,o.Uk)("Api GitHub");function W(t,e,i,l,n,s){const a=f.E2;return(0,o.wg)(),(0,o.iD)("div",m,[w,k,y,(0,o.Wm)(a,{class:"link",href:"http://bmfw.www.gov.cn/yqfxdjcx/risk.html",target:"_blank"},{default:(0,o.w5)((()=>[b])),_:1}),x,(0,o.Wm)(a,{class:"link",href:"https://github.com/panghaibin/COVID-Risk-Region",target:"_blank"},{default:(0,o.w5)((()=>[v])),_:1}),C,(0,o.Wm)(a,{class:"link",href:"https://github.com/panghaibin/RiskLevelAPI",target:"_blank"},{default:(0,o.w5)((()=>[S])),_:1})])}var I={name:"FooterShow"};const j=(0,s.Z)(I,[["render",W],["__scopeId","data-v-5493e71b"]]);var O=j,z=(i(9406),i(8009),i(7655),i(8157),i(33),i(6226),i(1430),i(172),i(1844),i(6809),i(8325),i(9007),i(8474),i(7488)),U=i(877),N=i(9566),D=i(292),$=i(8658),T=i(1902),A=i(8932),R=i(7588),E=i(6605),V=i(1185),q=i(1015),L=i(7139);const P=t=>((0,o.dD)("data-v-1d9b9e4b"),t=t(),(0,o.Cn)(),t),H={key:0},J={style:{margin:"10px auto"}},M={key:0},F={key:1},G={key:1},Z={key:2,class:"history-icon"},Y=P((()=>(0,o._)("span",{class:"history-text"},"查看历史",-1))),K={key:1},B=P((()=>(0,o._)("p",null,"加载历史记录失败！请刷新重试",-1))),Q={style:{"text-align":"center"}},X=(0,o.Uk)(" GitHub 源 "),tt=P((()=>(0,o._)("br",null,null,-1))),et=P((()=>(0,o._)("br",null,null,-1))),it={key:1},lt=P((()=>(0,o._)("br",null,null,-1))),ot=P((()=>(0,o._)("span",{class:"link"},"数据来自",-1))),nt=(0,o.Uk)(" 国家卫健委 "),st=P((()=>(0,o._)("br",null,null,-1))),at=(0,o.Uk)(" 前端项目 GitHub "),rt=P((()=>(0,o._)("br",null,null,-1))),dt=(0,o.Uk)(" Api项目 GitHub "),ht=P((()=>(0,o._)("br",null,null,-1))),ct=(0,o.Uk)(" 下载全部 "),ut=(0,o.Uk)("关闭"),_t={key:0,class:"history-icon",style:{float:"left"}},pt=P((()=>(0,o._)("span",{class:"history-text"},"< 上一历史数据",-1))),ft={key:1,class:"history-icon"},gt=P((()=>(0,o._)("span",{class:"history-text"},"下一历史数据 >",-1))),mt={class:"filter-tree"},wt={class:"risk-show"},kt={class:"high-risk-tab-label"},yt=(0,o.Uk)("高风险 "),bt={class:"num"},xt={class:"middle-risk-tab-label"},vt=(0,o.Uk)("中风险 "),Ct={class:"num"},St={class:"low-risk-tab-label"},Wt=(0,o.Uk)("低风险 "),It={class:"num"},jt={id:"high-risk"},Ot={class:"high-risk",style:{"margin-top":"0"}},zt=(0,o.Uk)(" 高风险等级地区 "),Ut={class:"num"},Nt={id:"middle-risk"},Dt={class:"middle-risk"},$t=(0,o.Uk)(" 中风险等级地区 "),Tt={class:"num"},At={id:"low-risk"},Rt={class:"low-risk"},Et=(0,o.Uk)(" 低风险等级地区 "),Vt={class:"num"},qt={class:"back-top"},Lt={key:1},Pt=P((()=>(0,o._)("p",null,"API 获取出错，请刷新重试",-1)));function Ht(t,e,i,n,s,a){const r=(0,o.up)("loading"),d=q.gn,h=(0,o.up)("clock"),c=f.E2,u=V.$Y,_=V.eI,p=(0,o.up)("Download"),g=E.mi,m=(0,o.up)("Link"),w=R.d0,k=A.EZ,y=T.Ks,b=$.p8,x=$.Ub,v=D.zi,C=N.y,S=U.vk,W=(0,o.up)("Top"),I=z.mR;return s.err?((0,o.wg)(),(0,o.iD)("div",Lt,[Pt,(0,o._)("p",null,(0,L.zw)(s.err_msg),1)])):((0,o.wg)(),(0,o.iD)("div",H,[(0,o._)("p",J,[s.ok?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[i.type_latest?((0,o.wg)(),(0,o.iD)("span",M," 以下数据截止自 "+(0,L.zw)(s.raw.data.end_update_time),1)):((0,o.wg)(),(0,o.iD)("span",F," 历史数据 "+(0,L.zw)(s.raw.data.end_update_time),1))],64)):((0,o.wg)(),(0,o.iD)("span",G,"加载中……")),(0,o.wy)((0,o._)("span",null,[(0,o.Wm)(d,{class:"is-loading"},{default:(0,o.w5)((()=>[(0,o.Wm)(r)])),_:1})],512),[[l.F8,s.loading_icon]]),s.ok&&!s.loading_icon?((0,o.wg)(),(0,o.iD)("span",Z,[(0,o.Wm)(c,{underline:!1,type:"primary",onClick:a.fetch_info},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h)])),_:1}),Y])),_:1},8,["onClick"])])):(0,o.kq)("",!0)]),(0,o.Wm)(w,{modelValue:s.info.visible,"onUpdate:modelValue":e[4]||(e[4]=t=>s.info.visible=t),title:"历史数据",width:"320px"},{footer:(0,o.w5)((()=>[s.info.err?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(g,{key:0,onClick:e[2]||(e[2]=t=>s.info.download_visible=!0),style:{"margin-right":"115px"}},{default:(0,o.w5)((()=>[ct])),_:1})),(0,o.Wm)(g,{onClick:e[3]||(e[3]=t=>s.info.visible=!1),type:"primary"},{default:(0,o.w5)((()=>[ut])),_:1})])),default:(0,o.w5)((()=>[s.info.err?((0,o.wg)(),(0,o.iD)("div",K,[B,(0,o._)("p",null,(0,L.zw)(s.info.err_msg),1)])):((0,o.wg)(),(0,o.j4)(_,{key:0,data:s.info.table,ref:"info_table","row-key":"id",onCellClick:a.info_click,"empty-text":"数据加载中……",height:"50vh"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{label:"时间"},{default:(0,o.w5)((t=>[(0,o.Uk)((0,L.zw)(t.row.update_time),1)])),_:1})])),_:1},8,["data","onCellClick"])),(0,o.Wm)(w,{modelValue:s.info.download_visible,"onUpdate:modelValue":e[1]||(e[1]=t=>s.info.download_visible=t),width:"300px",top:"25vh",title:"下载全部数据","append-to-body":""},{default:(0,o.w5)((()=>[(0,o._)("div",Q,[(0,o.Wm)(g,{type:"primary",onClick:e[0]||(e[0]=t=>a.download_data(-1)),style:{width:"10em"},plain:s.dark_mode},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p)])),_:1}),X])),_:1},8,["plain"]),tt,et,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.gh_proxy_list,((t,e)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:e},[e<3?((0,o.wg)(),(0,o.j4)(c,{key:0,type:"default",underline:!1,onClick:t=>a.download_data(e),class:"proxy-download-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p)])),_:1}),(0,o.Uk)(" 镜像源 "+(0,L.zw)(e+1),1)])),_:2},1032,["onClick"])):(0,o.kq)("",!0),(e+1)%3===0&&e<3?((0,o.wg)(),(0,o.iD)("br",it)):(0,o.kq)("",!0)],64)))),128)),lt,ot,(0,o.Wm)(c,{class:"link",href:"http://bmfw.www.gov.cn/yqfxdjcx/risk.html",target:"_blank"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m)])),_:1}),nt])),_:1}),st,(0,o.Wm)(c,{class:"link",href:"https://github.com/panghaibin/COVID-Risk-Region",target:"_blank"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m)])),_:1}),at])),_:1}),rt,(0,o.Wm)(c,{class:"link",href:"https://github.com/panghaibin/RiskLevelAPI",target:"_blank"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m)])),_:1}),dt])),_:1}),ht])])),_:1},8,["modelValue"])])),_:1},8,["modelValue"]),i.type_latest?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,L.C_)(s.ok?["history-pre-next"]:["history-pre-next","item-disabled"])},[s.info.pre?((0,o.wg)(),(0,o.iD)("span",_t,[(0,o.Wm)(c,{underline:!1,type:"primary",onClick:e[5]||(e[5]=t=>a.router_to(s.info.pre))},{default:(0,o.w5)((()=>[pt])),_:1})])):(0,o.kq)("",!0),s.info.next?((0,o.wg)(),(0,o.iD)("span",ft,[(0,o.Wm)(c,{underline:!1,type:"primary",onClick:e[6]||(e[6]=t=>a.router_to(s.info.next))},{default:(0,o.w5)((()=>[gt])),_:1})])):(0,o.kq)("",!0)],2)),(0,o._)("div",mt,[(0,o.Wm)(k,{disabled:!s.ok,ref:"filter_input",modelValue:s.filter_text,"onUpdate:modelValue":e[7]||(e[7]=t=>s.filter_text=t),placeholder:"请输入区域名称，多个关键词空格分隔",clearable:"",onClear:e[8]||(e[8]=e=>a.tag_add(t.$refs.filter_input.input.value)),onChange:a.tag_add},null,8,["disabled","modelValue","onChange"]),(0,o._)("template",{class:(0,L.C_)(s.ok?["tag-list"]:["tag-list","item-disabled"])},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.filter_history,((t,e)=>((0,o.wg)(),(0,o.j4)(y,{type:s.dark_mode?"info":"",key:e,closable:!0,onClose:t=>a.tag_remove(e),onClick:e=>{s.filter_text=t,a.tag_add(t)},class:"tag-item"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,L.zw)(t),1)])),_:2},1032,["type","onClose","onClick"])))),128))],2)]),(0,o._)("div",wt,[(0,o.Wm)(v,{target:".risk-show"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{onTabClick:a.handle_tabs_click,modelValue:s.selected_tab,"onUpdate:modelValue":e[9]||(e[9]=t=>s.selected_tab=t),class:(0,L.C_)(s.ok?["risk-tab-label"]:["risk-tab-label","item-disabled"]),stretch:""},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{name:"#high-risk"},{label:(0,o.w5)((()=>[(0,o._)("span",kt,[yt,(0,o._)("span",bt,"("+(0,L.zw)(s.high.count)+")",1)])])),_:1}),(0,o.Wm)(b,{name:"#middle-risk"},{label:(0,o.w5)((()=>[(0,o._)("span",xt,[vt,(0,o._)("span",Ct,"("+(0,L.zw)(s.middle.count)+")",1)])])),_:1}),(0,o.Wm)(b,{name:"#low-risk"},{label:(0,o.w5)((()=>[(0,o._)("span",St,[Wt,(0,o._)("span",It,"("+(0,L.zw)(s.low.count)+")",1)])])),_:1})])),_:1},8,["onTabClick","modelValue","class"])])),_:1}),(0,o._)("div",jt,[(0,o._)("h3",Ot,[zt,(0,o._)("span",Ut,"("+(0,L.zw)(s.high.count)+")",1),(0,o.Wm)(g,{class:"expand-all",type:s.dark_mode?"info":"primary",onClick:a.high_expand,disabled:!s.ok},{default:(0,o.w5)((()=>[(0,o.Uk)((0,L.zw)(s.high.expand_all_button),1)])),_:1},8,["type","onClick","disabled"])]),s.ok?((0,o.wg)(),(0,o.j4)(C,{key:s.high.key,data:s.high.tree,props:s.tree_props,"node-key":"id","default-expand-all":s.high.expand_all,"default-expanded-keys":s.high.default_id_list,"auto-expand-parent":!1,ref:"high_tree","filter-node-method":a.high_filter,"empty-text":"无数据"},null,8,["data","props","default-expand-all","default-expanded-keys","filter-node-method"])):((0,o.wg)(),(0,o.j4)(S,{key:1,rows:2,animated:""}))]),(0,o._)("div",Nt,[(0,o._)("h3",Dt,[$t,(0,o._)("span",Tt,"("+(0,L.zw)(s.middle.count)+")",1),(0,o.Wm)(g,{class:"expand-all",type:s.dark_mode?"info":"primary",onClick:a.middle_expand,disabled:!s.ok},{default:(0,o.w5)((()=>[(0,o.Uk)((0,L.zw)(s.middle.expand_all_button),1)])),_:1},8,["type","onClick","disabled"])]),s.ok?((0,o.wg)(),(0,o.j4)(C,{key:s.middle.key,data:s.middle.tree,props:s.tree_props,"node-key":"id","default-expand-all":s.middle.expand_all,"default-expanded-keys":s.middle.default_id_list,"auto-expand-parent":!1,ref:"middle_tree","filter-node-method":a.middle_filter,"empty-text":"无数据"},null,8,["data","props","default-expand-all","default-expanded-keys","filter-node-method"])):((0,o.wg)(),(0,o.j4)(S,{key:1,rows:2,animated:""}))]),(0,o._)("div",At,[(0,o._)("h3",Rt,[Et,(0,o._)("span",Vt,"("+(0,L.zw)(s.low.count)+")",1),s.low.used?((0,o.wg)(),(0,o.j4)(g,{key:0,class:"expand-all",type:s.dark_mode?"info":"primary",onClick:a.low_expand,disabled:!s.ok},{default:(0,o.w5)((()=>[(0,o.Uk)((0,L.zw)(s.low.expand_all_button),1)])),_:1},8,["type","onClick","disabled"])):(0,o.kq)("",!0)]),s.ok?((0,o.wg)(),(0,o.j4)(C,{key:s.low.key,data:s.low.tree,props:s.tree_props,"node-key":"id","default-expand-all":s.low.expand_all,"default-expanded-keys":s.low.default_id_list,"auto-expand-parent":!1,ref:"low_tree","filter-node-method":a.low_filter,"empty-text":s.low.empty_text},null,8,["data","props","default-expand-all","default-expanded-keys","filter-node-method","empty-text"])):((0,o.wg)(),(0,o.j4)(S,{key:1,rows:2,animated:""}))])]),(0,o.Wm)(I,{onClick:a.back_to_top},{default:(0,o.w5)((()=>[(0,o._)("div",qt,[(0,o.Wm)(W,{style:{width:"1em",height:"1em",margin:"0.5em"}})])])),_:1},8,["onClick"])]))}var Jt=i(6265),Mt=i.n(Jt),Ft=i(6666),Gt=(i(8742),i(354)),Zt=i.n(Gt),Yt={name:"RegionShow",props:{data_url:String,info_url:String,type_latest:Boolean},computed:{data_name(){return this.data_url.split("/").pop().split(".").shift()},data_name_timestamp(){return this.data_name+"_timestamp"}},data(){return{api_url_list:JSON.parse(localStorage.getItem("api_url_list")||"[]"),api_url:localStorage.getItem("api_url")||"",gh_proxy_list:JSON.parse(localStorage.getItem("gh_proxy_list")||"[]"),selected_tab:"",is_scrolling:!1,section_observer:null,section_selector:["#high-risk","#middle-risk","#low-risk",".filter-tree",".header"],raw:null,ok:!1,err:!1,err_msg:"",info:{raw:null,visible:!1,download_visible:!1,ok:!1,err:!1,err_msg:"",table:null,pre:null,next:null},high:{key:0,tree:null,count:"-",province_id_list:[],city_id_list:[],county_id_list:[],default_id_list:[],expand_all:!1,expand_all_button:"展开"},middle:{key:0,tree:null,count:"-",province_id_list:[],city_id_list:[],county_id_list:[],default_id_list:[],expand_all:!1,expand_all_button:"展开"},low:{key:0,tree:null,count:"-",province_id_list:[],city_id_list:[],county_id_list:[],default_id_list:[],expand_all:!1,expand_all_button:"展开",used:!0,empty_text:"无数据"},tree_props:{label:"label",children:"children",class:"tree-node"},filter_text:"",filter_history:["北京市","上海市","江苏省"],dark_mode:!1,loading_icon:!1}},mounted(){this.api_url||(this.api_url=this.api_url_list[0],localStorage.setItem("api_url",this.api_url)),this.type_latest?localStorage.getItem(this.data_name_timestamp)&&localStorage.getItem(this.data_name)?this.fetch_latest(!0):this.fetch_latest(!1):(this.fetch_history(),this.fetch_data(this.info_url,null,!0).then((t=>{i.info.raw=t;const e=this.$route.params.fileName,l=this.find_info_pre_next(e);this.info.pre=l.pre,this.info.next=l.next})));let t=JSON.parse(localStorage.getItem("filter_history"));t&&t.length?this.filter_history=t:localStorage.setItem("filter_history",JSON.stringify(this.filter_history));let e=window.matchMedia("(prefers-color-scheme: dark)"),i=this,l=t=>{i.dark_mode=t.matches};if(e.addEventListener("change",l),l(e),this.observe_sections(),this.$route.hash&&-1!==this.section_selector.indexOf(this.$route.hash)){setTimeout((()=>{window.scrollTo(0,0)}),100);let t=setInterval((()=>{this.loading_icon||(this.scroll_to(this.$route.hash),this.selected_tab=`#${this.$route.hash}`,clearInterval(t))}),100)}},methods:{fetch_data:async function(t,e=null,i=!1,l=!1,o=0){let n=t.split(".").shift(),s=n+"_timestamp",a=JSON.parse(localStorage.getItem(n));if(i&&a)return a;if(!l&&(new Date).getTime()-localStorage.getItem(s)<3e5)return a;let r=this.api_url;null!==e&&((e<0||e>=this.api_url_list.length)&&(e=0),r=this.api_url_list[e],localStorage.setItem("api_url",r));let d=r+t,h=3e3,c=Mt().CancelToken;const u=c.source(),_=setTimeout((()=>{u.cancel()}),h);let p=this;try{let t=await Mt().get(d,{cancelToken:u.token});clearTimeout(_);let e=t.data;return localStorage.setItem(n,JSON.stringify(e)),localStorage.setItem(s,(new Date).getTime().toString()),Promise.resolve(e)}catch(f){return clearTimeout(_),console.log(d,f),null===e&&(e=p.api_url_list.indexOf(r)),e++,o++,o<p.api_url_list.length?p.fetch_data(t,e,i,l,o):Promise.reject(f)}},fetch_latest(t=!1){if(t){if(this.raw=JSON.parse(localStorage.getItem(this.data_name)),this.high_init(),this.middle_init(),this.low_init(),this.ok=!0,(new Date).getTime()-localStorage.getItem(this.data_name_timestamp)<3e5)return;this.loading_icon=!0}else this.loading_icon=!0;let e=this.data_url+"?t="+(new Date).getTime();this.fetch_data(e,null,!1,!0).then((t=>{let e,i=!0;this.ok?this.raw.data["end_update_time"]!==t["data"]["end_update_time"]?e="数据更新成功":(e="已是最新数据",i=!1):e="数据加载成功",Ft.bM.success({message:e,duration:2500,position:"bottom-right",showClose:!1,customClass:"notification-item"}),i&&(this.raw=t,this.high_init(),this.middle_init(),this.low_init(),this.ok=!0),this.loading_icon=!1})).catch((t=>{if(console.log(t),this.ok){let t="数据更新失败<br>已显示缓存数据";Ft.bM.info({message:t,duration:2500,position:"bottom-right",showClose:!1,customClass:"notification-item",dangerouslyUseHTMLString:!0})}else this.err_msg=t,this.err=!0;this.loading_icon=!1}))},fetch_info(){this.info.visible=!0,this.info.err=!1;let t=this;this.fetch_data(this.info_url).then((e=>{t.info.raw=e;let i=e["file_list"],l=[],o=0;for(let t=i.length-1;t>=0;t--){let e=i[t],n=e["file_name"].replace(".json",""),s=new Date(1e3*e["update_time"]),a=s.toLocaleString("zh-CN",{timeZone:"Asia/Shanghai",year:"numeric",month:"2-digit",day:"2-digit"}),r=s.toLocaleString("zh-CN",{timeZone:"Asia/Shanghai",hour12:!1,hour:"2-digit"});a=a.replace(/\//g,"-"),r=r.replace("24","00"),l.length&&l[l.length-1]["update_time"]===a?l[l.length-1]["children"].unshift({id:o++,update_time:a+" "+r,file_name:n}):l.push({id:o++,update_time:a,file_name:"#",children:[{id:o++,update_time:a+" "+r,file_name:n}]})}t.info.table=l,t.info.ok=!0})).catch((e=>{t.info.err=!0,t.info.err_msg=e,console.log(e)}))},fetch_history(){this.loading_icon=!0;let t=this.data_url;this.fetch_data(t,null,!0).then((t=>{let e="历史数据加载成功";Ft.bM.success({message:e,duration:1200,position:"bottom-right",showClose:!1,customClass:"notification-item"}),this.raw=t,this.high_init(),this.middle_init(),this.low_init(),this.ok=!0,this.loading_icon=!1})).catch((t=>{console.log(t);let e="历史数据加载失败";Ft.bM.info({message:e,duration:2500,position:"bottom-right",showClose:!1,customClass:"notification-item"}),this.err_msg=t,this.err=!0,this.loading_icon=!1}))},list2tree(t,e){let i=[],l=0,o=[],n=[],s=[];for(let a=0;a<t.length;a++){let e=t[a],r=e["province"],d=e.city,h=e["county"],c=e["communitys"],u=null,_=null,p=null,f=null;for(let t=0;t<i.length;t++){let e=i[t];if(e.label===r){u=e;break}}null===u&&(u={id:l++,pid:-1,label:r,children:[],expanded:!0},i.push(u),o.push(u.id));for(let t=0;t<u.children.length;t++){let e=u.children[t];if(e.label===d){_=e;break}}null===_&&(_={id:l++,pid:u.id,label:d,children:[],expanded:!0},u.children.push(_),n.push(_.id));for(let t=0;t<_.children.length;t++){let e=_.children[t];if(e.label===h){p=e;break}}null===p&&(p={id:l++,pid:_.id,label:h,children:[],expanded:!0},_.children.push(p),s.push(p.id));for(let t=0;t<p.children.length;t++){let e=p.children[t];if(e.label===c){f=e;break}}if(null===f){f=[];for(let t=0;t<c.length;t++)p.children.push({id:l++,pid:p.id,label:c[t]})}}e.tree=i,e.province_id_list=o,e.city_id_list=n,e.county_id_list=s,e.default_id_list=o.concat(s)},high_init(){this.list2tree(this.raw.data["highlist"],this.high),this.high.key++,this.high.count=this.raw.data["hcount"]},middle_init(){this.list2tree(this.raw.data["middlelist"],this.middle),this.middle.key++,this.middle.count=this.raw.data["mcount"]},low_init(){let t=this.raw.data["lowlist"];if(!t)return this.low.used=!1,void(this.low.empty_text="其余未列出地区为低风险地区(历史定义)");this.low.used=!0,this.low.empty_text="无数据",this.list2tree(this.raw.data["lowlist"],this.low),this.low.key++,this.low.count=this.raw.data["lcount"]},high_expand(){if(this.high.expand_all=!this.high.expand_all,this.high.expand_all){let t=this.high.default_id_list.concat(this.high.city_id_list);for(let e=0;e<t.length;e++)this.$refs.high_tree.store.getNode(t[e]).expanded=!0}else for(let t=0;t<this.high.city_id_list.length;t++)this.$refs.high_tree.store.getNode(this.high.city_id_list[t]).expanded=!1;this.high.expand_all_button=this.high.expand_all?"收起":"展开"},middle_expand(){if(this.middle.expand_all=!this.middle.expand_all,this.middle.expand_all){let t=this.middle.default_id_list.concat(this.middle.city_id_list);for(let e=0;e<t.length;e++)this.$refs.middle_tree.store.getNode(t[e]).expanded=!0}else for(let t=0;t<this.middle.city_id_list.length;t++)this.$refs.middle_tree.store.getNode(this.middle.city_id_list[t]).expanded=!1;this.middle.expand_all_button=this.middle.expand_all?"收起":"展开"},low_expand(){if(this.low.expand_all=!this.low.expand_all,this.low.expand_all){let t=this.low.default_id_list.concat(this.low.city_id_list);for(let e=0;e<t.length;e++)this.$refs.low_tree.store.getNode(t[e]).expanded=!0}else for(let t=0;t<this.low.city_id_list.length;t++)this.$refs.low_tree.store.getNode(this.low.city_id_list[t]).expanded=!1;this.low.expand_all_button=this.low.expand_all?"收起":"展开"},high_filter(t,e){if(!t)return void 0===e.children&&this.high.count++,!0;let i=t.split(" ");for(let l=0;l<i.length;l++){let t=i[l];if(!t)continue;if(e.label.includes(t))return void 0===e.children&&this.high.count++,!0;let o=e.pid;while(-1!==o){let i=this.$refs.high_tree.store.getNode(o).data;if(i.label.includes(t))return void 0===e.children&&this.high.count++,!0;o=i.pid}}return!1},middle_filter(t,e){if(!t)return void 0===e.children&&this.middle.count++,!0;let i=t.split(" ");for(let l=0;l<i.length;l++){let t=i[l];if(!t)continue;if(e.label.includes(t))return void 0===e.children&&this.middle.count++,!0;let o=e.pid;while(-1!==o){let i=this.$refs.middle_tree.store.getNode(o).data;if(i.label.includes(t))return void 0===e.children&&this.middle.count++,!0;o=i.pid}}return!1},low_filter(t,e){if(!t)return void 0===e.children&&this.low.count++,!0;let i=t.split(" ");for(let l=0;l<i.length;l++){let t=i[l];if(!t)continue;if(e.label.includes(t))return void 0===e.children&&this.low.count++,!0;let o=e.pid;while(-1!==o){let i=this.$refs.low_tree.store.getNode(o).data;if(i.label.includes(t))return void 0===e.children&&this.low.count++,!0;o=i.pid}}return!1},tag_add(t){if(t=t.trim(),""!==t){while(t.includes("  "))t=t.replace("  "," ");this.filter_history.unshift(t),this.filter_history=Array.from(new Set(this.filter_history)),localStorage.setItem("filter_history",JSON.stringify(this.filter_history))}},tag_remove(t){this.filter_history.splice(t,1),localStorage.setItem("filter_history",JSON.stringify(this.filter_history))},router_to(t){t&&this.$router.push({path:"./"+t})},info_click(t){"#"===t.file_name?this.$refs.info_table.toggleRowExpansion(t):this.router_to(t.file_name)},find_info_pre_next(t){const e=this.info.raw.file_list;let i=e.findIndex((e=>e.file_name===t+".json"));if(-1===i)return;let l,o,n=i-1,s=i+1;return l=n<0?null:e[n].file_name.replace(".json",""),o=s>=e.length?null:e[s].file_name.replace(".json",""),{pre:l,next:o}},download_data(t){const e="https://github.com/panghaibin/RiskLevelAPI/archive/refs/heads/api.zip";-1===t?window.open(e):t>=0&&t<this.gh_proxy_list.length&&window.open(this.gh_proxy_list[t]+e)},scroll_to(t){this.$router.push({path:"",hash:t,replace:!0});const e=t?document.querySelectorAll(t)[0].offsetTop-55:0;this.is_scrolling=!0;const i=e.toFixed(),l=()=>{window.pageYOffset.toFixed()===i&&(window.removeEventListener("scroll",l),this.is_scrolling=!1)};window.addEventListener("scroll",l),l(),window.scrollTo({left:0,top:e,behavior:"smooth"})},handle_tabs_click(t){this.scroll_to(t.props.name)},back_to_top(){this.scroll_to(""),this.selected_tab=""},observe_sections(){try{this.section_observer.disconnect()}catch(i){console.log(i)}const t={rootMargin:"-15% 0px -85%",threshold:0};this.section_observer=new IntersectionObserver(Zt()((t=>{this.section_observer_handler(t)}),10),t);const e=document.querySelectorAll(this.section_selector);e.forEach((t=>{this.section_observer.observe(t)}))},section_observer_handler(t){for(const e of t)if(e.isIntersecting&&!this.is_scrolling){const t=e.target.id,i=""===t?"":"#"+t;this.selected_tab=i,this.$router.push({path:"",hash:i,replace:!0})}}},watch:{filter_text(t){t=t.trim();while(t.includes("  "))t=t.replace("  "," ");this.high.count=0,this.$refs.high_tree.filter(t),this.middle.count=0,this.$refs.middle_tree.filter(t),this.low.used&&(this.low.count=0,this.$refs.low_tree.filter(t))},is_scrolling(t){t&&setTimeout((()=>{this.is_scrolling=!1}),1e3)}}};const Kt=(0,s.Z)(Yt,[["render",Ht],["__scopeId","data-v-1d9b9e4b"]]);var Bt=Kt;const Qt={class:"content-body"},Xt={class:"content"};function te(t,e,i,l,n,s){const a=(0,o.up)("Head"),r=(0,o.up)("router-link"),d=p.nZ,h=Bt,c=p.b2,u=O,_=p.F_,f=p.G4;return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o._)("title",null,(0,L.zw)(n.title),1)])),_:1}),(0,o._)("div",Qt,[(0,o._)("div",Xt,[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"header"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{to:"/"},{default:(0,o.w5)((()=>[(0,o._)("h1",null,(0,L.zw)(n.title),1)])),_:1})])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)(h,{key:s.api_url,data_url:s.api_url,info_url:n.info_url,type_latest:s.type_latest},null,8,["data_url","info_url","type_latest"]))])),_:1}),(0,o.Wm)(_,{class:"footer"},{default:(0,o.w5)((()=>[(0,o.Wm)(u)])),_:1})])),_:1})])])],64)}var ee={data(){return{refreshing:!1,registration:null,updateExists:!1}},created(){document.addEventListener("swUpdated",this.updateAvailable,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(()=>{this.refreshing||(this.refreshing=!0,window.location.reload())}))},methods:{updateAvailable(t){this.registration=t.detail,this.updateExists=!0,this.refreshApp()},refreshApp(){this.updateExists=!1,this.registration&&this.registration.waiting&&this.registration.waiting.postMessage({type:"SKIP_WAITING"})}}};const ie="https://raw.githubusercontent.com/panghaibin/RiskLevelAPI/api/",le=(()=>{const t=JSON.parse('["https://gh-proxy.caduo.ml/", "https://ghproxy.com/", "https://ghproxy.net/", "https://gh.biejieshi.com/", "https://proxy.zyun.vip/", "https://git.yumenaka.net/", "https://git.886.be/", "https://gitcdn.top/", "https://gh-proxy-download.moeyy.cn/gh-proxy/", "https://gt.nekosya.xyz/", "https://gh.cyp0633.icu/", "https://proxy.yaoyaoling.net/", "https://iacc.eu.org/", "https://github.starskim.com/", "https://tofushark.co/", "https://gh-proxy.tk/", "https://lazyeo.com/", "https://gh.dwxh.tk/", "https://ghp.quickso.cn/", "https://gh-proxy.xyzol.ga/", "https://github.91chi.fun/", "https://www.godaftwithebk.pub/", "https://pro.feverrun.xyz/", "https://gh.not.icu/", "https://gh.zhaojun.im/", "https://gh.yanqishui.work/", "https://github-proxy-sanaos.koyeb.app/", "https://ghproxy.littlesite.ml/", "https://gh.isuo.tk/", "https://gh.dmnb.cf/", "https://gh.daigua.ml/", "https://github.thingswhy.cf/", "https://github.xionghaizhi.tk/", "https://gh.lemonawa.xyz/", "https://ghp.lwd-temp.top/", "https://ghproxy.remotelink.top/", "https://gh.owo.blue/", "https://gh.wangxiaoer.site/", "https://gh.tooziya.tk/", "https://vip.maxonechog.com/", "https://api.youlo.tk/", "https://get.geshandaniu.me/", "https://github.sres.life/", "https://fookdies139.xyz/", "https://github.cooluc.com/", "https://gfw.lomorage.com/", "https://github.xianyang.cf/", "https://github.lifbot.cf/", "https://gh.chjina.com/", "https://git.iiiu.cc/", "https://gh.api.99988866.xyz/"]'),e=t.slice(3,t.length);for(let i=1;i<e.length;i++){const t=Math.floor(Math.random()*(i+1));[e[i],e[t]]=[e[t],e[i]]}return t.slice(0,3).concat(e)})(),oe=[ie].concat(JSON.parse('["https://covid-api.caduo.ml/", "https://raw.githubusercontents.com/panghaibin/RiskLevelAPI/api/", "https://cdn.jsdelivr.net/gh/panghaibin/RiskLevelAPI@api/"]')).concat(le.map((t=>`${t}${ie}`)));localStorage.setItem("api_url_list",JSON.stringify(oe)),localStorage.setItem("gh_proxy_list",JSON.stringify(le));var ne={name:"HomeView",components:{RegionShow:Bt,FooterShow:O,Head:h.Fb},computed:{api_url(){let t=this.$route.params.fileName;return t?t+".json":"latest.json"},type_latest(){return!this.$route.params.fileName}},data(){return{title:"全国疫情高中低风险地区查询",info_url:"info.json"}},watch:{api_url(){window.scroll({top:0,behavior:"smooth"})}},mixins:[ee]};const se=(0,s.Z)(ne,[["render",te]]);var ae=se;const re=[{path:"/:fileName?",name:"home",component:ae}],de=(0,_.p7)({history:(0,_.PO)("/COVID-Risk-Region/"),routes:re});var he=de;const ce=(0,l.ri)(d);ce.use(he);for(const[_e,pe]of Object.entries(u))ce.component(_e,pe);const ue=(0,h.G6)();ce.use(ue),ce.mount("#app")}},e={};function i(l){var o=e[l];if(void 0!==o)return o.exports;var n=e[l]={exports:{}};return t[l](n,n.exports,i),n.exports}i.m=t,function(){var t=[];i.O=function(e,l,o,n){if(!l){var s=1/0;for(h=0;h<t.length;h++){l=t[h][0],o=t[h][1],n=t[h][2];for(var a=!0,r=0;r<l.length;r++)(!1&n||s>=n)&&Object.keys(i.O).every((function(t){return i.O[t](l[r])}))?l.splice(r--,1):(a=!1,n<s&&(s=n));if(a){t.splice(h--,1);var d=o();void 0!==d&&(e=d)}}return e}n=n||0;for(var h=t.length;h>0&&t[h-1][2]>n;h--)t[h]=t[h-1];t[h]=[l,o,n]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var l in e)i.o(e,l)&&!i.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:e[l]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,l){var o,n,s=l[0],a=l[1],r=l[2],d=0;if(s.some((function(e){return 0!==t[e]}))){for(o in a)i.o(a,o)&&(i.m[o]=a[o]);if(r)var h=r(i)}for(e&&e(l);d<s.length;d++)n=s[d],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(h)},l=self["webpackChunkcovid_risk_region"]=self["webpackChunkcovid_risk_region"]||[];l.forEach(e.bind(null,0)),l.push=e.bind(null,l.push.bind(l))}();var l=i.O(void 0,[998],(function(){return i(7855)}));l=i.O(l)})();
//# sourceMappingURL=app.83fa06d7.js.map