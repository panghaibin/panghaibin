(function(){"use strict";var e={9541:function(e,t,i){var l=i(9242),d=i(3396),n=i(7139);const a={class:"content"},r=(0,d._)("h1",null,"全国疫情中高风险地区查询",-1);function o(e,t,i,l,o,u){const s=(0,d.up)("Head"),h=(0,d.up)("el-header"),_=(0,d.up)("RegionShow"),c=(0,d.up)("el-main"),p=(0,d.up)("el-container");return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d.Wm)(s,null,{default:(0,d.w5)((()=>[(0,d._)("title",null,(0,n.zw)(o.title),1)])),_:1}),(0,d._)("div",a,[(0,d.Wm)(p,null,{default:(0,d.w5)((()=>[(0,d.Wm)(h,{class:"header"},{default:(0,d.w5)((()=>[r])),_:1}),(0,d.Wm)(c,null,{default:(0,d.w5)((()=>[(0,d.Wm)(_,{data_url:o.api_url},null,8,["data_url"])])),_:1})])),_:1})])],64)}const u=e=>((0,d.dD)("data-v-764beefc"),e=e(),(0,d.Cn)(),e),s={key:0},h={key:0},_={key:1},c={class:"high-risk"},p=(0,d.Uk)(" 高风险等级地区 "),f={class:"num"},g={class:"middle-risk"},m=(0,d.Uk)(" 中风险等级地区 "),x={class:"num"},b={key:1},v=u((()=>(0,d._)("p",null,"API 获取出错，刷新重试",-1)));function y(e,t,i,l,a,r){const o=(0,d.up)("el-input"),u=(0,d.up)("el-button"),y=(0,d.up)("el-tree"),k=(0,d.up)("el-skeleton");return a.err?((0,d.wg)(),(0,d.iD)("div",b,[v,(0,d._)("p",null,(0,n.zw)(a.err_msg),1)])):((0,d.wg)(),(0,d.iD)("div",s,[a.ok?((0,d.wg)(),(0,d.iD)("p",h,"以下信息截止自"+(0,n.zw)(a.raw.data.end_update_time),1)):((0,d.wg)(),(0,d.iD)("p",_,"加载中……")),(0,d.Wm)(o,{modelValue:a.filter_text,"onUpdate:modelValue":t[0]||(t[0]=e=>a.filter_text=e),placeholder:"请输入区域名称",disabled:!a.ok},null,8,["modelValue","disabled"]),(0,d._)("h3",c,[p,(0,d._)("span",f,"("+(0,n.zw)(a.high.count)+")",1),(0,d.Wm)(u,{class:"expand-all",type:"primary",onClick:r.high_expand,disabled:!a.ok},{default:(0,d.w5)((()=>[(0,d.Uk)((0,n.zw)(a.high.expand_all_button),1)])),_:1},8,["onClick","disabled"])]),a.ok?((0,d.wg)(),(0,d.j4)(y,{key:2,data:a.high.tree,"node-key":"id","default-expand-all":a.high.expand_all,"default-expanded-keys":a.high.default_id_list,"auto-expand-parent":!1,ref:"high_tree","filter-node-method":r.filter_high_node},null,8,["data","default-expand-all","default-expanded-keys","filter-node-method"])):((0,d.wg)(),(0,d.j4)(k,{key:3,rows:6,animated:""})),(0,d._)("h3",g,[m,(0,d._)("span",x,"("+(0,n.zw)(a.middle.count)+")",1),(0,d.Wm)(u,{class:"expand-all",type:"primary",onClick:r.middle_expand,disabled:!a.ok},{default:(0,d.w5)((()=>[(0,d.Uk)((0,n.zw)(a.middle.expand_all_button),1)])),_:1},8,["onClick","disabled"])]),a.ok?((0,d.wg)(),(0,d.j4)(y,{key:4,data:a.middle.tree,"node-key":"id","default-expand-all":a.middle.expand_all,"default-expanded-keys":a.middle.default_id_list,"auto-expand-parent":!1,ref:"middle_tree","filter-node-method":r.filter_middle_node},null,8,["data","default-expand-all","default-expanded-keys","filter-node-method"])):((0,d.wg)(),(0,d.j4)(k,{key:5,rows:6,animated:""}))]))}var k=i(6265),w=i.n(k),j={name:"RegionShow",props:{data_url:String},data(){return{raw:null,ok:!1,err:!1,err_msg:"",high:{tree:null,count:"-",province_id_list:[],city_id_list:[],county_id_list:[],default_id_list:[],expand_all:!1,expand_all_button:"展开"},middle:{tree:null,count:"-",province_id_list:[],city_id_list:[],county_id_list:[],default_id_list:[],expand_all:!1,expand_all_button:"展开"},filter_text:""}},mounted(){let e=this;w().get(this.data_url).then((function(t){let i=t.data;e.raw=i;let l=O(i.data.highlist);e.high.tree=l["tree"],e.high.province_id_list=l["province_id_list"],e.high.city_id_list=l["city_id_list"],e.high.county_id_list=l["county_id_list"],e.high.default_id_list=l["default_id_list"],e.high.count=i.data.hcount;let d=O(i.data.middlelist);e.middle.tree=d["tree"],e.middle.province_id_list=d["province_id_list"],e.middle.city_id_list=d["city_id_list"],e.middle.county_id_list=d["county_id_list"],e.middle.default_id_list=d["default_id_list"],e.middle.count=i.data.mcount,e.ok=!0})).catch((function(t){console.log(t),e.err_msg=t,e.err=!0}))},methods:{high_expand(){if(this.high.expand_all=!this.high.expand_all,this.high.expand_all){let e=this.high.default_id_list.concat(this.high.city_id_list);for(let t=0;t<e.length;t++)this.$refs.high_tree.store.getNode(e[t]).expanded=!0}else for(let e=0;e<this.high.city_id_list.length;e++)this.$refs.high_tree.store.getNode(this.high.city_id_list[e]).expanded=!1;this.high.expand_all_button=this.high.expand_all?"收起":"展开"},middle_expand(){if(this.middle.expand_all=!this.middle.expand_all,this.middle.expand_all){let e=this.middle.default_id_list.concat(this.middle.city_id_list);for(let t=0;t<e.length;t++)this.$refs.middle_tree.store.getNode(e[t]).expanded=!0}else for(let e=0;e<this.middle.city_id_list.length;e++)this.$refs.middle_tree.store.getNode(this.middle.city_id_list[e]).expanded=!1;this.middle.expand_all_button=this.middle.expand_all?"收起":"展开"},filter_high_node(e,t){if(!e)return void 0===t.children&&this.high.count++,!0;if(t.label.includes(e))return void 0===t.children&&this.high.count++,!0;let i=t.pid;while(-1!==i){let l=this.$refs.high_tree.store.getNode(i).data;if(l.label.includes(e))return void 0===t.children&&this.high.count++,!0;i=l.pid}return!1},filter_middle_node(e,t){if(!e)return void 0===t.children&&this.middle.count++,!0;if(t.label.includes(e))return void 0===t.children&&this.middle.count++,!0;let i=t.pid;while(-1!==i){let l=this.$refs.middle_tree.store.getNode(i).data;if(l.label.includes(e))return void 0===t.children&&this.middle.count++,!0;i=l.pid}return!1}},watch:{filter_text(e){this.high.count=0,this.$refs.high_tree.filter(e),this.middle.count=0,this.$refs.middle_tree.filter(e)}}};function O(e){let t=[],i=0,l=[],d=[],n=[];for(let a=0;a<e.length;a++){let r=e[a],o=r["province"],u=r.city,s=r["county"],h=r["communitys"],_=null,c=null,p=null,f=null;for(let e=0;e<t.length;e++){let i=t[e];if(i.label===o){_=i;break}}null===_&&(_={id:i++,pid:-1,label:o,children:[],expanded:!0},t.push(_),l.push(_.id));for(let e=0;e<_.children.length;e++){let t=_.children[e];if(t.label===u){c=t;break}}null===c&&(c={id:i++,pid:_.id,label:u,children:[],expanded:!0},_.children.push(c),d.push(c.id));for(let e=0;e<c.children.length;e++){let t=c.children[e];if(t.label===s){p=t;break}}null===p&&(p={id:i++,pid:c.id,label:s,children:[],expanded:!0},c.children.push(p),n.push(p.id));for(let e=0;e<p.children.length;e++){let t=p.children[e];if(t.label===h){f=t;break}}if(null===f){f=[];for(let e=0;e<h.length;e++)p.children.push({id:i++,pid:p.id,label:h[e]})}}return{tree:t,province_id_list:l,city_id_list:d,county_id_list:n,default_id_list:l.concat(n)}}var W=i(89);const $=(0,W.Z)(j,[["render",y],["__scopeId","data-v-764beefc"]]);var z=$,C=i(2350);let D="https://raw.githubusercontent.com/panghaibin/RiskLevelAPI/api/latest.json";var N={name:"App",components:{RegionShow:z,Head:C.Fb},data(){return{title:"全国疫情中高风险地区查询",dev_api_url:"http://localhost/latest.json",prod_api_url:"https://raw.githubusercontent.com/panghaibin/RiskLevelAPI/api/latest.json",api_url:D}}};const P=(0,W.Z)(N,[["render",o]]);var R=P,U=i(6945),A=(i(4415),i(50)),I=e=>{e.use(U.Z,{locale:A.Z})};const S=(0,l.ri)(R),Z=(0,C.G6)();S.use(Z),I(S),S.mount("#app")}},t={};function i(l){var d=t[l];if(void 0!==d)return d.exports;var n=t[l]={exports:{}};return e[l].call(n.exports,n,n.exports,i),n.exports}i.m=e,function(){var e=[];i.O=function(t,l,d,n){if(!l){var a=1/0;for(s=0;s<e.length;s++){l=e[s][0],d=e[s][1],n=e[s][2];for(var r=!0,o=0;o<l.length;o++)(!1&n||a>=n)&&Object.keys(i.O).every((function(e){return i.O[e](l[o])}))?l.splice(o--,1):(r=!1,n<a&&(a=n));if(r){e.splice(s--,1);var u=d();void 0!==u&&(t=u)}}return t}n=n||0;for(var s=e.length;s>0&&e[s-1][2]>n;s--)e[s]=e[s-1];e[s]=[l,d,n]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var l in t)i.o(t,l)&&!i.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,l){var d,n,a=l[0],r=l[1],o=l[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(d in r)i.o(r,d)&&(i.m[d]=r[d]);if(o)var s=o(i)}for(t&&t(l);u<a.length;u++)n=a[u],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(s)},l=self["webpackChunkcovid_risk_region"]=self["webpackChunkcovid_risk_region"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=i.O(void 0,[998],(function(){return i(9541)}));l=i.O(l)})();
//# sourceMappingURL=app.d0ee21ba.js.map