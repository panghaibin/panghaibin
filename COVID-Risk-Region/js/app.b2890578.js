(function(){"use strict";var e={3735:function(e,i,t){var l=t(9242),d=t(3396),n=t(7139);const r={class:"content"},a=(0,d._)("h1",null,"全国疫情中高风险地区查询",-1);function _(e,i,t,l,_,o){const h=(0,d.up)("Head"),u=(0,d.up)("el-header"),s=(0,d.up)("RegionShow"),c=(0,d.up)("el-main"),p=(0,d.up)("el-container");return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d.Wm)(h,null,{default:(0,d.w5)((()=>[(0,d._)("title",null,(0,n.zw)(_.title),1)])),_:1}),(0,d._)("div",r,[(0,d.Wm)(p,null,{default:(0,d.w5)((()=>[(0,d.Wm)(u,{class:"header"},{default:(0,d.w5)((()=>[a])),_:1}),(0,d.Wm)(c,null,{default:(0,d.w5)((()=>[(0,d.Wm)(s,{data_url:_.api_url},null,8,["data_url"])])),_:1})])),_:1})])],64)}const o=e=>((0,d.dD)("data-v-396e4192"),e=e(),(0,d.Cn)(),e),h={key:0},u={key:0},s={key:1},c={class:"high-risk"},p=(0,d.Uk)(" 高风险等级地区 "),f={class:"num"},g={class:"middle-risk"},m=(0,d.Uk)(" 中风险等级地区 "),v={class:"num"},y={key:1},x=o((()=>(0,d._)("p",null,"API 获取出错，刷新重试",-1)));function b(e,i,t,l,r,a){const _=(0,d.up)("el-input"),o=(0,d.up)("el-button"),b=(0,d.up)("el-tree"),k=(0,d.up)("el-skeleton");return r.err?((0,d.wg)(),(0,d.iD)("div",y,[x,(0,d._)("p",null,(0,n.zw)(r.err_msg),1)])):((0,d.wg)(),(0,d.iD)("div",h,[r.ok?((0,d.wg)(),(0,d.iD)("p",u,"以下信息截止自"+(0,n.zw)(r.raw.data.end_update_time),1)):((0,d.wg)(),(0,d.iD)("p",s,"加载中……")),(0,d.Wm)(_,{modelValue:r.filter_text,"onUpdate:modelValue":i[0]||(i[0]=e=>r.filter_text=e),placeholder:"请输入区域名称",disabled:!r.ok},null,8,["modelValue","disabled"]),(0,d._)("h3",c,[p,(0,d._)("span",f,"("+(0,n.zw)(r.high_count)+")",1),(0,d.Wm)(o,{class:"expand-all",type:"primary",onClick:a.high_expand,disabled:!r.ok},{default:(0,d.w5)((()=>[(0,d.Uk)((0,n.zw)(r.high_expand_all_button),1)])),_:1},8,["onClick","disabled"])]),r.ok?((0,d.wg)(),(0,d.j4)(b,{key:2,data:r.high_tree,"node-key":"id","default-expand-all":r.high_expand_all,"default-expanded-keys":r.high_default_id_list,"auto-expand-parent":!1,ref:"high_tree","filter-node-method":a.filter_high_node},null,8,["data","default-expand-all","default-expanded-keys","filter-node-method"])):((0,d.wg)(),(0,d.j4)(k,{key:3,rows:6,animated:""})),(0,d._)("h3",g,[m,(0,d._)("span",v,"("+(0,n.zw)(r.middle_count)+")",1),(0,d.Wm)(o,{class:"expand-all",type:"primary",onClick:a.middle_expand,disabled:!r.ok},{default:(0,d.w5)((()=>[(0,d.Uk)((0,n.zw)(r.middle_expand_all_button),1)])),_:1},8,["onClick","disabled"])]),r.ok?((0,d.wg)(),(0,d.j4)(b,{key:4,data:r.middle_tree,"node-key":"id","default-expand-all":r.middle_expand_all,"default-expanded-keys":r.middle_default_id_list,"auto-expand-parent":!1,ref:"middle_tree","filter-node-method":a.filter_middle_node},null,8,["data","default-expand-all","default-expanded-keys","filter-node-method"])):((0,d.wg)(),(0,d.j4)(k,{key:5,rows:6,animated:""}))]))}var k=t(6265),w=t.n(k),j={name:"RegionShow",props:{data_url:String},data(){return{raw:null,ok:!1,err:!1,err_msg:"",high_tree:null,high_city_id_list:null,high_province_id_list:null,high_county_id_list:null,high_default_id_list:null,high_count:0,high_expand_all:!1,high_expand_all_button:"展开",middle_tree:null,middle_city_id_list:null,middle_province_id_list:null,middle_county_id_list:null,middle_default_id_list:null,middle_count:0,middle_expand_all:!1,middle_expand_all_button:"展开",filter_text:""}},mounted(){let e=this;w().get(this.data_url).then((function(i){let t=i.data;e.raw=t;let l=O(t.data.highlist);e.high_tree=l["tree"],e.high_province_id_list=l["province_id_list"],e.high_city_id_list=l["city_id_list"],e.high_county_id_list=l["county_id_list"],e.high_default_id_list=e.high_province_id_list.concat(e.high_county_id_list),e.high_count=t.data.hcount;let d=O(t.data.middlelist);e.middle_tree=d["tree"],e.middle_province_id_list=d["province_id_list"],e.middle_city_id_list=d["city_id_list"],e.middle_county_id_list=d["county_id_list"],e.middle_default_id_list=e.middle_province_id_list.concat(e.middle_county_id_list),e.middle_count=t.data.mcount,e.ok=!0})).catch((function(i){console.log(i),e.err_msg=i,e.err=!0}))},methods:{high_expand(){if(this.high_expand_all=!this.high_expand_all,this.high_expand_all){let e=this.high_default_id_list.concat(this.high_city_id_list);for(let i=0;i<e.length;i++)this.$refs.high_tree.store.getNode(e[i]).expanded=!0}else for(let e=0;e<this.high_city_id_list.length;e++)this.$refs.high_tree.store.getNode(this.high_city_id_list[e]).expanded=!1;this.high_expand_all_button=this.high_expand_all?"收起":"展开"},middle_expand(){if(this.middle_expand_all=!this.middle_expand_all,this.middle_expand_all){let e=this.middle_default_id_list.concat(this.middle_city_id_list);for(let i=0;i<e.length;i++)this.$refs.middle_tree.store.getNode(e[i]).expanded=!0}else for(let e=0;e<this.middle_city_id_list.length;e++)this.$refs.middle_tree.store.getNode(this.middle_city_id_list[e]).expanded=!1;this.middle_expand_all_button=this.middle_expand_all?"收起":"展开"},filter_high_node(e,i){if(!e)return void 0===i.children&&this.high_count++,!0;if(i.label.includes(e))return void 0===i.children&&this.high_count++,!0;let t=i.pid;while(-1!==t){let l=this.$refs.high_tree.store.getNode(t).data;if(l.label.includes(e))return void 0===i.children&&this.high_count++,!0;t=l.pid}return!1},filter_middle_node(e,i){if(!e)return void 0===i.children&&this.middle_count++,!0;if(i.label.includes(e))return void 0===i.children&&this.middle_count++,!0;let t=i.pid;while(-1!==t){let l=this.$refs.middle_tree.store.getNode(t).data;if(l.label.includes(e))return void 0===i.children&&this.middle_count++,!0;t=l.pid}return!1}},watch:{filter_text(e){this.high_count=0,this.$refs.high_tree.filter(e),this.middle_count=0,this.$refs.middle_tree.filter(e)}}};function O(e){let i=[],t=0,l=[],d=[],n=[];for(let r=0;r<e.length;r++){let a=e[r],_=a.province,o=a.city,h=a.county,u=a.communitys,s=null,c=null,p=null,f=null;for(let e=0;e<i.length;e++){let t=i[e];if(t.label===_){s=t;break}}null===s&&(s={id:t++,pid:-1,label:_,children:[],expanded:!0},i.push(s),l.push(s.id));for(let e=0;e<s.children.length;e++){let i=s.children[e];if(i.label===o){c=i;break}}null===c&&(c={id:t++,pid:s.id,label:o,children:[],expanded:!0},s.children.push(c),d.push(c.id));for(let e=0;e<c.children.length;e++){let i=c.children[e];if(i.label===h){p=i;break}}null===p&&(p={id:t++,pid:c.id,label:h,children:[],expanded:!0},c.children.push(p),n.push(p.id));for(let e=0;e<p.children.length;e++){let i=p.children[e];if(i.label===u){f=i;break}}if(null===f){f=[];for(let e=0;e<u.length;e++)p.children.push({id:t++,pid:p.id,label:u[e]})}}return{tree:i,province_id_list:l,city_id_list:d,county_id_list:n}}var W=t(89);const $=(0,W.Z)(j,[["render",b],["__scopeId","data-v-396e4192"]]);var z=$,C=t(2350);let D="https://raw.githubusercontent.com/panghaibin/RiskLevelAPI/api/latest.json";var N={name:"App",components:{RegionShow:z,Head:C.Fb},data(){return{title:"全国疫情中高风险地区查询",dev_api_url:"http://localhost/latest.json",prod_api_url:"https://raw.githubusercontent.com/panghaibin/RiskLevelAPI/api/latest.json",api_url:D}}};const P=(0,W.Z)(N,[["render",_]]);var R=P,U=t(6945),A=(t(4415),t(50)),I=e=>{e.use(U.Z,{locale:A.Z})};const S=(0,l.ri)(R),Z=(0,C.G6)();S.use(Z),I(S),S.mount("#app")}},i={};function t(l){var d=i[l];if(void 0!==d)return d.exports;var n=i[l]={exports:{}};return e[l].call(n.exports,n,n.exports,t),n.exports}t.m=e,function(){var e=[];t.O=function(i,l,d,n){if(!l){var r=1/0;for(h=0;h<e.length;h++){l=e[h][0],d=e[h][1],n=e[h][2];for(var a=!0,_=0;_<l.length;_++)(!1&n||r>=n)&&Object.keys(t.O).every((function(e){return t.O[e](l[_])}))?l.splice(_--,1):(a=!1,n<r&&(r=n));if(a){e.splice(h--,1);var o=d();void 0!==o&&(i=o)}}return i}n=n||0;for(var h=e.length;h>0&&e[h-1][2]>n;h--)e[h]=e[h-1];e[h]=[l,d,n]}}(),function(){t.n=function(e){var i=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(i,{a:i}),i}}(),function(){t.d=function(e,i){for(var l in i)t.o(i,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:i[l]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)}}(),function(){var e={143:0};t.O.j=function(i){return 0===e[i]};var i=function(i,l){var d,n,r=l[0],a=l[1],_=l[2],o=0;if(r.some((function(i){return 0!==e[i]}))){for(d in a)t.o(a,d)&&(t.m[d]=a[d]);if(_)var h=_(t)}for(i&&i(l);o<r.length;o++)n=r[o],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(h)},l=self["webpackChunkcovid_risk_region"]=self["webpackChunkcovid_risk_region"]||[];l.forEach(i.bind(null,0)),l.push=i.bind(null,l.push.bind(l))}();var l=t.O(void 0,[998],(function(){return t(3735)}));l=t.O(l)})();
//# sourceMappingURL=app.b2890578.js.map